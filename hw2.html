<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Homework assignment 2 for CNIT 133 (JavaScript, jQuery, Ajax) at City College of San Francisco instructed by Claudia Da Silva">
    <title>Jared Roussel - CNIT 133 - CCSF - Homework 2</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:wght@700&display=swap" rel="stylesheet">
    <link href="css/cnit133.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <style type="text/css">
    .vars { font-family: 'Times New Roman', serif; color: red; }
    .fancy { font-family: 'Arial', sans-serif; color: blue; }
    .emphatic { font-family: 'Impact', sans-serif; color: green; font-weight: bold; }
    #part-2-form div, #part-3-form div { display: table-row; }
    #part-2-form input[type=number], #part-3-form input[type=number] { display: table-cell; margin-left: 1rem; margin-bottom: 1rem; width: 5em; }
    #part-2-form label, #part-3-form label { display: table-cell; }
    #part-2-results, #part-3-results { display: none; padding: 2rem 0; }
    .part-2-result, .part-3-result { color: #fff; background-color: #000; margin: 0 .5rem; padding: .5rem 1rem; border-radius: 5rem; font-weight: bold; font-size: 1.25em; }
    .error { color: red; font-weight: bold; }
    section.part { min-height: 50vh; }
    #extra-credit-form { margin-top: 2rem; }
    #exchange-rate-rate { width: 5rem; }
    #rate-to-exchange { width: 5rem; }
    #foreign-exchange-rates th, #foreign-exchange-rates td { text-align: left; min-width: 10rem; }
    #foreign-exchange-rates-title { text-align: center !important; background-color: #000; color: #fff; margin-bottom: 1rem; border-radius: .25em .25em 0 0; }
    input.selected { background-color: #CCE5D3; }
    input.error { font-weight: normal; background-color: #FFDFDF; }
    .exchange-rate-value { color: green; font-weight: bold; }
    </style>
    <script>
    // Using jQuery event handler method
    $(function() {
      $("#part-2-form").submit(function(event) {
        event.preventDefault();

        int1 = document.getElementById('part-2-int-1').value;
        int2 = document.getElementById('part-2-int-2').value;
        int3 = document.getElementById('part-2-int-3').value;
        int1_int = parseInt(int1);
        int2_int = parseInt(int2);
        int3_int = parseInt(int3);

        if (Number.isInteger(int1_int) && Number.isInteger(int2_int) && Number.isInteger(int3_int)) {
            sum = int1_int + int2_int + int3_int;
            product = int1_int * int2_int * int3_int;
            average = ((int1_int + int2_int + int3_int)/3).toFixed(1);
            message = '<p><strong>Sum <span class="part-2-result">' + sum + '</span> Product <span class="part-2-result">' + product + '</span> Average <span class="part-2-result">' + average + '</span></strong></p>';
        } else {
            message = '<p class="error">You need to enter 3 valid integers to perform the calculation.</p>';
        }

        $("#part-2-results").fadeIn('slow').html(message);

      });

      $("#part-2-form-reset").click(function(event) {
        $("#part-2-results").fadeOut('slow');
      });

      $("#part-3-form-reset").click(function(event) {
        $("#part-3-results").fadeOut('slow');
      });
    });

    function renderStaticPart1() {
        var vars = 'xy';
        var int1 = 12;
        var int2 = 89;
        document.write('<span class="vars">' + vars + '</span> ');
        document.write('<span class="fancy">' + int1 + '</span> ');
        document.write('<em class="emphatic">' + int2 + '</em>');
    }
    </script>
</head>
<body id="homework-2">
    <header>
        <nav id="main-nav" class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container-fluid">
                <a class="navbar-brand" href="index.html">Jared Roussel - CNIT 133</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Homework Assignments
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="index.html">Homework 1 (Home)</a></li>
                        <li><a class="dropdown-item" href="hw2.html">Homework 2</a></li>
                        <li><a class="dropdown-item" href="hw3.html">Homework 3</a></li>
                        <li><a class="dropdown-item" href="hw4.html">Homework 4</a></li>
                        <li><a class="dropdown-item" href="hw5.html">Homework 5</a></li>
                        <li><a class="dropdown-item" href="hw6.html">Homework 6</a></li>
                        <li><a class="dropdown-item" href="hw7.html">Homework 7</a></li>
                        <li><a class="dropdown-item" href="hw8.html">Homework 8</a></li>
                    </ul>
                    </li>
                </ul>
                </div>
            </div>
        </nav>
    </header>
    <div class="homework">
        <div class="container">
            <h1>Homework 2</h1>
            <section id="part-1" class="part">
                <h2 class="section-title">Part 1</h2>
                <div class="part-1-results">
                    <script>
                    renderStaticPart1();
                    </script>
                </div>
            </section>
            <section id="part-2" class="part">
                <h2 class="section-title">Part 2</h2>
                <p>Enter three integers (negative or positive) to add them together. Decimals will be truncated and not considered.</p>
                <fieldset>
                  <form id="part-2-form">
                      <div>
                          <label for="part-2-int-1">Integer 1</label>
                          <input type="number" id="part-2-int-1" name="int1" step="1" title="Integer 1">
                      </div>
                      <div>
                          <label for="part-2-int-2">Integer 2</label>
                          <input type="number" id="part-2-int-2" name="int2" step="1" title="Integer 1">
                      </div>
                      <div>
                          <label for="part-2-int-3">Integer 3</label>
                          <input type="number" id="part-2-int-3" name="int3" step="1" title="Integer 1">
                      </div>
                      <input id="part-2-form-submit" type="submit" value="Click to Fade Results">
                      <input id="part-2-form-reset" type="reset" value="Reset">
                  </form>
                </fieldset>
                <div id="part-2-results"></div>
            </section>
            <section id="part-3" class="part">
              <h2 class="section-title">Part 3</h2>
              <p>Enter 5 numbers (with or without decimals) to see how many are negative, how many are positive, and how many are zero.</p>
              <fieldset>
                <form id="part-3-form">
                  <div>
                    <label for="part-3-number-1">Number 1</label>
                    <input type="number" id="part-3-number-1" name="number1" step="any" title="Number 1">
                  </div>
                  <div>
                    <label for="part-3-number-2">Number 2</label>
                    <input type="number" id="part-3-number-2" name="number2" step="any" title="Number 2">
                  </div>
                  <div>
                    <label for="part-3-number-3">Number 3</label>
                    <input type="number" id="part-3-number-3" name="number3" step="any" title="Number 3">
                  </div>
                  <div>
                    <label for="part-3-number-4">Number 4</label>
                    <input type="number" id="part-3-number-4" name="number4" step="any" title="Number 4">
                  </div>
                  <div>
                    <label for="part-3-number-5">Number 5</label>
                    <input type="number" id="part-3-number-5" name="number5" step="any" title="Number 5">
                  </div>
                  <input id="part-3-form-submit" type="submit" value="See Results">
                  <input id="part-3-form-reset" type="reset" value="Reset">
                </form>
              </fieldset>
              <div id="part-3-results"></div>
            </section>
            <section id="extra-credit" class="part">
              <h2 class="section-title">Extra Credit</h2>
              <p>Enter a value in U.S. Dollars to convert to select global currencies using July 2019 foreign exchange rates.</p>
              <table id="foreign-exchange-rates">
                <thead>
                  <tr>
                    <th colspan="3" id="foreign-exchange-rates-title">Monetary Exchange Rates</th>
                  </tr>
                  <tr>
                    <th>Currency</th>
                    <th id="foreign-exchange-thead-rate">Rate (USD)</th>
                    <th>Value</th>
                  </tr>
                </thead>
                <tbody id="render-exchange-rates">
                  <script>
                  $(function() {
                    getExchangeRates();
                  });
                  </script>
                </tbody>
              </table>
              <fieldset>
                <form id="extra-credit-form">
                  <div>
                    <label for="extra-credit-number-1">Enter an amount to convert in USD $</label>
                    <input type="text" id="rate-to-exchange" name="rate_to_exchange" title="U.S. Dollar Amount">
                  </div>
                </form>
              </fieldset>
            </section>
        </div>
    </div>
    <script>
    // Using JavaScript event handler method
    document.getElementById('part-3-form').addEventListener('submit', (event) => {
      event.preventDefault();
      number1 = document.getElementById('part-3-number-1').value;
      number2 = document.getElementById('part-3-number-2').value;
      number3 = document.getElementById('part-3-number-3').value;
      number4 = document.getElementById('part-3-number-4').value;
      number5 = document.getElementById('part-3-number-5').value;
      number1_int = parseInt(number1);
      number2_int = parseInt(number2);
      number3_int = parseInt(number3);
      number4_int = parseInt(number4);
      number5_int = parseInt(number5);

      // We're just relying on integer arithmetic for float/long values instead of doing isNaN() checks
      if (Number.isInteger(number1_int) && Number.isInteger(number2_int) && Number.isInteger(number3_int) && Number.isInteger(number4_int) && Number.isInteger(number5_int)) {
          let numbers = new Array(number1, number2, number3, number4, number5);
          var negative_total = 0, zero_total = 0, positive_total = 0;
          for (i=0; i<numbers.length; i++) {
            if (numbers[i]<0) negative_total++;
            else if (numbers[i]==0) zero_total++;
            else if (numbers[i]>0) positive_total++;
          }
          message = '<p><strong>Negatives <span class="part-3-result">' + negative_total + '</span> Zeroes <span class="part-3-result">' + zero_total + '</span> Positives <span class="part-3-result">' + positive_total + '</span></strong></p>';
      } else {
        message = '<p class="error">You need to enter 5 valid numbers to see your results.</p>';
      }
      part_3_results = document.getElementById('part-3-results');
      part_3_results.style.display = 'block';
      part_3_results.innerHTML = message;
    });

    document.getElementById('part-3-form-reset').addEventListener('click', function() {
      document.getElementById('part-3-results').style.display = 'none';
    })

    // Extra Credit
    usd_to_eur = {
      exchangeRate: 0.89,
      title: 'Euro',
      abbreviation: 'EUR'
    };
    usd_to_cad = {
      exchangeRate: 1.31,
      title: 'Canadian Dollar',
      abbreviation: 'CAD'
    };
    usd_to_hkd = {
      exchangeRate: 7.80,
      title: 'Hong Kong Dollar',
      abbreviation: 'HKD'
    };
    usd_to_jpy = {
      exchangeRate: 108.38,
      title: 'Japanese Yen',
      abbreviation: 'JPY'
    };
    usd_to_mxn = {
      exchangeRate: 19.11,
      title: 'Mexican Peso',
      abbreviation: 'MXN'
    };

    exchange_rates = [usd_to_eur, usd_to_cad, usd_to_hkd, usd_to_jpy, usd_to_mxn];

    function getExchangeRates() {
      render_selector = $('#render-exchange-rates');
      amount_to_exchange = $('#rate-to-exchange').val();
      render_selector.empty();

      for (rate in exchange_rates) {
        exchange_rate_value = calculateExchangeRate(amount_to_exchange, exchange_rates[rate].exchangeRate, exchange_rates[rate].abbreviation);
        render_selector.append(`<tr id="exchange-rate-${exchange_rates[rate].title}">
            <td class="exchange-rate-title">${exchange_rates[rate].title}</td>
            <td class="exchange-rate-rate"><input id="exchange-rate-rate" type="text" value="${exchange_rates[rate].exchangeRate}" disabled></td>
            <td class="exchange-rate-value">${exchange_rate_value}</td>
          </tr>`);
      }
    }

    // To return a formatted conversion string
    // Currency Format regex string within replace() is from https://blog.abelotech.com/posts/number-currency-formatting-javascript/
    function calculateExchangeRate(amountToExchange, exchangeRate, unit) {
      if (amountToExchange==Infinity) return "You're beyond money. Who cares?";
      else if (amountToExchange==-Infinity) return "You're currently a black hole. You should get that looked at.";
      else if (amountToExchange && exchangeRate && !isNaN(amountToExchange) && !isNaN(exchangeRate)) return (parseFloat(amountToExchange) * parseFloat(exchangeRate)).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,') + " " + unit;
      return '';
    }

    $("#rate-to-exchange").focus(function(event) {
      $(this).attr('class', 'selected');
    });

    $("#rate-to-exchange").blur(function(event) {
      $(this).attr('class', '');
    });

    // To avoid submitting form on enter key press
    $("#rate-to-exchange").keypress(function(event) {
      if (event.which==13 || event.keyCode == 13) event.preventDefault();
      return true;
    });

    $("#extra-credit-form").keyup(function(event) {
      input_selector = $("#rate-to-exchange");
      input_selector.attr('class','');
      if (isNaN(input_selector.val())) {
        input_selector.attr('class', 'error');
      } else {
        input_selector.attr('class', 'selected');
        getExchangeRates();
      }
    });

    </script>
</body>
</html>
